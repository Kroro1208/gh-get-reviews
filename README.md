# üîç get-gh-reviews

[![npm version](https://badge.fury.io/js/get-gh-reviews.svg)](https://badge.fury.io/js/get-gh-reviews)
[![License: ISC](https://img.shields.io/badge/License-ISC-blue.svg)](https://opensource.org/licenses/ISC)
[![Node.js](https://img.shields.io/badge/Node.js-14.0.0+-green.svg)](https://nodejs.org/)

> üìù **Track GitHub reviews you received** - The missing GitHub feature!

## üì¶ Installation & Usage

```bash
# Option 1: Global installation
npm install -g get-gh-reviews
get-gh-reviews reviews -u YOUR_USERNAME

# Option 2: No installation needed (npx)
npx get-gh-reviews reviews -u YOUR_USERNAME

# Generate markdown report
npx get-gh-reviews reviews -u YOUR_USERNAME --markdown report.md
```

**Ever wondered who's been reviewing your code most frequently? Or what feedback patterns you're getting?**

`get-gh-reviews` is a powerful CLI tool that fills GitHub's gap by tracking all code reviews you've received across your repositories. Generate beautiful reports, discover review patterns, and level up your development workflow!

## ‚≠ê Why use this?

GitHub shows you "reviews requested" and lets you see "reviews given", but **there's no way to see all reviews you've received**. This tool solves that problem with:

- üéØ **Complete review visibility** - See ALL reviews across ALL your PRs
- üìä **Smart analytics** - Discover who reviews you most, review patterns, and more
- üìù **Beautiful reports** - Generate shareable Markdown reports with enhanced table of contents
- üîç **Advanced filtering** - By time, organization, repository, and review status
- ‚ö° **Lightning fast** - Efficient GitHub API usage with smart caching
- üê± **Cute loading animations** - Enjoy adorable characters while processing
- üìÖ **Timeline view** - GitHub-style chronological display of reviews and replies

## üöÄ Quick Start

### Option A: Global Installation

1. **Install globally:**

   ```bash
   npm install -g get-gh-reviews
   ```

2. **Get your GitHub token:**
   - Visit [GitHub Settings > Tokens](https://github.com/settings/tokens)
   - Create a token with `repo` or `public_repo` scope

3. **Run the command:**
   ```bash
   get-gh-reviews reviews -u YOUR_GITHUB_USERNAME -t YOUR_TOKEN
   ```

### Option B: No Installation (using npx)

```bash
npx get-gh-reviews reviews -u YOUR_GITHUB_USERNAME -t YOUR_TOKEN
```

**üí° Tip:** If you get "command not found" error, use `npx` - it always works!

## üîí Security & Token Handling

This project follows safe practices for handling credentials and install-time behavior. Key points:

- Do NOT store long-lived tokens in repository files. Prefer environment variables (GITHUB_TOKEN) or your CI secret store.
- The CLI will create `~/.get-gh-reviews.env` only on first run and attempts to set restrictive file permissions (0600). Storing tokens in this file is optional and not recommended for shared machines.
- This package does not run `postinstall` or other automatic install-time scripts. If you are operating in a high-security environment, consider installing with `npm_config_ignore_scripts=1`.

If you discover a security issue, please open a GitHub Issue in this repository (preferable) and follow the reporting guidance in `.github/SECURITY.md`.

That's it! üéâ

## Overview

`get-gh-reviews` addresses the GitHub feature gap where there's no consolidated view of all reviews you've received on your pull requests. See who's been reviewing your code, what feedback you're getting, and track your development patterns.

## ‚ú® Features

| Feature                   | Description                                             | Example                              |
| ------------------------- | ------------------------------------------------------- | ------------------------------------ |
| üéØ **Review Tracking**    | See all reviews received on your PRs                    | `get-gh-reviews reviews -u username` |
| üìä **Smart Analytics**    | Who reviews you most? Which repos get most feedback?    | `get-gh-reviews stats -u username`   |
| üìù **Beautiful Reports**  | Generate Markdown reports with table of contents        | `--markdown monthly-report.md`       |
| üîç **Advanced Filtering** | Filter by time, org, repo, or review state              | `-d 30 -o mycompany -s approved`     |
| üíæ **Multiple Formats**   | Human-readable, JSON, or Markdown output                | `--json` or `--markdown`             |
| üè¢ **Team Ready**         | Perfect for organizations and team workflows            | `-o your-company`                    |
| üì± **Code Context**       | See actual code being reviewed with syntax highlighting | Automatic in Markdown reports        |
| ‚ö° **Fast & Reliable**    | Efficient API usage with smart error handling           | Works with large repositories        |

### üÜï Latest Features (v1.5.0)

- **üìã Table of Contents** - Navigate large reports easily with clickable TOC
- **üé® Syntax Highlighting** - Code context with proper language detection
- **üîó Smart Linking** - Jump between TOC and detailed sections

## üì¶ Installation

### Method 1: Global Installation (Recommended)

```bash
npm install -g get-gh-reviews
```

After installation, you can run the command directly:

```bash
get-gh-reviews reviews -u your-username --markdown my-reviews.md
```

### Method 2: Using npx (No installation required)

If you don't want to install globally or have permission issues:

```bash
npx get-gh-reviews reviews -u your-username --markdown my-reviews.md
```

### Troubleshooting Installation Issues

**If `get-gh-reviews` command is not found after global installation:**

1. **Check if it's installed globally:**

   ```bash
   npm list -g get-gh-reviews
   ```

2. **Find npm's global bin directory:**

   ```bash
   npm bin -g
   ```

3. **Add to your PATH (if needed):**

   ```bash
   # Add this to your ~/.bashrc or ~/.zshrc
   export PATH="$(npm bin -g):$PATH"
   ```

4. **Alternative: Use npx (always works):**
   ```bash
   npx get-gh-reviews --help
   ```

**For permission issues on macOS/Linux:**

```bash
# Option 1: Use npx (recommended)
npx get-gh-reviews reviews -u username

# Option 2: Fix npm permissions
sudo npm install -g get-gh-reviews
```

### Local Installation (as dependency)

```bash
npm install get-gh-reviews
```

## Setup Options

### Option 1: Use Token Directly (Recommended for first-time users)

```bash
get-gh-reviews reviews -u your-username -t your_github_token
```

### Option 2: Save Token in Config File (Convenient for regular use)

When you first run the tool, it automatically creates a config file at `~/.get-gh-reviews.env`. Just edit it:

```bash
# The tool will create this file automatically
nano ~/.get-gh-reviews.env

# Then replace 'your_token_here' with your actual token
GITHUB_TOKEN=ghp_your_actual_token_here
```

### Option 3: Environment Variable

```bash
export GITHUB_TOKEN="your_token_here"
get-gh-reviews reviews -u your-username
```

### Getting Your GitHub Token

1. Go to [GitHub Settings > Tokens](https://github.com/settings/tokens)
2. Click "Generate new token" ‚Üí "Generate new token (classic)"
3. Select scopes:
   - ‚úÖ `repo` (for private repositories)
   - ‚úÖ `public_repo` (for public repositories only)
4. Copy the token (starts with `ghp_`)

## Common Usage Examples

### üìã Basic Commands

```bash
# See all reviews you've received
get-gh-reviews reviews -u your-username

# Get review statistics (who reviews you most, etc.)
get-gh-reviews stats -u your-username

# See reviews from last 30 days only
get-gh-reviews reviews -u your-username -d 30

# Export reviews to a Markdown report
get-gh-reviews reviews -u your-username --markdown my-reviews.md
```

### üè¢ For Teams & Organizations

```bash
# Filter reviews from a specific organization
get-gh-reviews reviews -u your-username -o your-company

# Team statistics for the last week
get-gh-reviews stats -u your-username -o your-company -d 7
```

### üìä Different Output Formats

```bash
# Human-readable output (default)
get-gh-reviews reviews -u your-username

# JSON format (for scripts/automation)
get-gh-reviews reviews -u your-username --json

# Generate a nice Markdown report
get-gh-reviews reviews -u your-username --markdown monthly-review-report
```

### ‚ö° Pro Tips

```bash
# Only show open PRs
get-gh-reviews reviews -u your-username -s open

# Limit results (useful for quick checks)
get-gh-reviews reviews -u your-username -l 10

# Combine filters for precise results
get-gh-reviews reviews -u your-username -o mycompany -d 7 -s open
```

### CLI Options

| Option           | Description                                | Default |
| ---------------- | ------------------------------------------ | ------- |
| `-u, --username` | GitHub username (required)                 | -       |
| `-t, --token`    | GitHub token (or use GITHUB_TOKEN env var) | -       |
| `-o, --org`      | Filter by organization                     | -       |
| `-s, --state`    | PR state filter (open, closed, all)        | all     |
| `-p, --page`     | Page number                                | 1       |
| `-l, --limit`    | Results per page                           | 30      |
| `-d, --days`     | Filter reviews from last N days            | -       |
| `--json`         | Output as JSON                             | false   |
| `--markdown`     | Output as Markdown file                    | -       |

## Programmatic Usage

### JavaScript/Node.js

```javascript
const { GitHubReviewsTracker } = require("get-gh-reviews");

const tracker = new GitHubReviewsTracker("your_github_token");
```

### TypeScript

```typescript
import { GitHubReviewsTracker, Review, ReviewStats } from "get-gh-reviews";

const tracker = new GitHubReviewsTracker("your_github_token");

// Get reviews received
async function getMyReviews() {
  try {
    const result = await tracker.getReceivedReviews("your-username", {
      state: "all",
      per_page: 30,
      org: "your-org", // optional
      timeframe: 7, // last 7 days, optional
    });

    console.log(`Found ${result.total_count} reviews`);
    result.reviews.forEach((review) => {
      console.log(`${review.reviewer}: ${review.state} on ${review.pr_title}`);
    });
  } catch (error) {
    console.error("Error:", error.message);
  }
}

// Get review statistics
async function getMyStats() {
  try {
    const stats = await tracker.getReviewStats("your-username", {
      org: "your-org", // optional
      timeframe: 30, // last 30 days, optional
    });

    console.log("Review Stats:", stats);
  } catch (error) {
    console.error("Error:", error.message);
  }
}

// Generate Markdown report
async function generateReport() {
  try {
    const result = await tracker.getReceivedReviews("your-username", {
      timeframe: 30,
    });

    const markdownContent = tracker.generateMarkdownReport(
      result.reviews,
      "your-username",
      {
        title: "Monthly Review Report",
        includeStats: true,
      }
    );

    const fs = require("fs");
    fs.writeFileSync("my-reviews.md", markdownContent, "utf8");
    console.log("Markdown report generated: my-reviews.md");
  } catch (error) {
    console.error("Error:", error.message);
  }
}

getMyReviews();
getMyStats();
generateReport();
```

## üìã Report Preview

The generated Markdown reports now include a **table of contents** for easy navigation:

### Sample Report Structure

````markdown
# üîç Received Reviews Report

**Generated:** 2025/9/4
**User:** your-username  
**Total Reviews:** 15 reviews

## üìä Statistics

- ‚úÖ Approved: 8 reviews
- üîÑ Changes Requested: 5 reviews
- üí¨ Comments Only: 2 reviews

## üìã Table of Contents

- [Fix database migration issues](#pr-myorg-myrepo-123) - **3 reviews** (myorg/myrepo#123)
- [Update auth system](#pr-myorg-myrepo-124) - **2 reviews** (myorg/myrepo#124)
- [Add user profiles](#pr-myorg-myrepo-125) - **3 reviews** (myorg/myrepo#125)

## üìù Detailed Reviews

### <a id="pr-myorg-myrepo-123"></a>[Fix database migration issues](https://github.com/myorg/myrepo/pull/123) (#123)

#### üîÑ CHANGES_REQUESTED by [@senior-dev](https://github.com/senior-dev)

**Date:** 2025/8/26 8:14:42

**Code Comment:**
**üìÅ database_schema.sql:96**

```sql
`id` CHAR(26) NOT NULL,
`user_id` CHAR(26) NOT NULL,
`title` VARCHAR(255) NOT NULL,
```
````

> üí¨ Consider adding indexes for better performance

[üîó View Comment](https://github.com/myorg/myrepo/pull/123#discussion_r123456)

````

### üéØ Key Features of Reports:
- **üìã Clickable Table of Contents** - Jump directly to any PR section
- **üé® Syntax Highlighted Code** - See actual code being reviewed
- **üîó GitHub Integration** - Direct links to PRs, comments, and reviews
- **üìä Smart Statistics** - Review counts and patterns at a glance
- **üì± Mobile Friendly** - Beautiful formatting on any device

## API Response Format

### Reviews Response

```json
{
  "reviews": [
    {
      "pr_title": "Add new feature X",
      "pr_number": 123,
      "pr_url": "https://github.com/owner/repo/pull/123",
      "repository": "owner/repo",
      "reviewer": "reviewer-username",
      "reviewer_avatar": "https://avatars.githubusercontent.com/u/123456?v=4",
      "state": "APPROVED",
      "submitted_at": "2025-01-15T10:30:00Z",
      "body": "Looks good to me!",
      "review_url": "https://github.com/owner/repo/pull/123#pullrequestreview-123456"
    }
  ],
  "total_count": 42,
  "page": 1,
  "per_page": 30
}
````

### Statistics Response

```json
{
  "total_reviews": 42,
  "by_state": {
    "approved": 25,
    "changes_requested": 12,
    "commented": 5
  },
  "by_reviewer": {
    "reviewer1": 15,
    "reviewer2": 10,
    "reviewer3": 8
  },
  "by_repository": {
    "org/repo1": 20,
    "org/repo2": 15,
    "org/repo3": 7
  }
}
```

## Review States

- `APPROVED` ‚úÖ - Review approved the pull request
- `CHANGES_REQUESTED` üîÑ - Review requested changes
- `COMMENTED` üí¨ - Review left comments without explicit approval
- `DISMISSED` ‚ùå - Review was dismissed

## üéØ Who Should Use This?

### üë®‚Äçüíª **Individual Developers**

- **Track your growth** - See feedback patterns and improve code quality
- **Build relationships** - Identify who reviews you most and engage better
- **Career development** - Document review history for performance reviews
- **Learning insights** - Understand what areas you get most feedback on

### üë©‚Äçüíº **Team Leaders & Engineering Managers**

- **Team insights** - Analyze review distribution across team members
- **Process improvement** - Identify review bottlenecks and patterns
- **Knowledge sharing** - Find opportunities for mentoring and learning
- **Performance tracking** - Quantify collaboration and feedback quality

### üè¢ **Organizations & Enterprises**

- **Engineering metrics** - Track review activity across all repositories
- **Workflow optimization** - Identify and eliminate review process bottlenecks
- **Quality assurance** - Monitor review coverage and engagement levels
- **Team health** - Ensure balanced review distribution and prevent burnout

### üéì **Open Source Maintainers**

- **Community engagement** - Track contributor feedback and involvement
- **Project health** - Monitor review activity across all contributions
- **Recognition** - Identify top reviewers for community acknowledgment

## Development

This package is written in TypeScript. For development:

```bash
# Run TypeScript CLI directly
npm run dev -- reviews -u username

# Build the project
npm run build

# Run example
npm run example
```

## Troubleshooting

### ‚ùå "User/Organization not found" Error

- **Check your username spelling** (case-sensitive)
- **Verify the user exists**: Visit `https://github.com/your-username`
- **Check token permissions**: Make sure your token has `repo` or `public_repo` scope

### üîë Authentication Issues

- **Token format**: Should start with `ghp_` (Personal Access Token)
- **Token expiration**: Check if your token hasn't expired
- **Scope permissions**: Need `repo` for private repos, `public_repo` for public repos

### üìÅ "No reviews found"

- **User has no PRs**: The username might not have any pull requests
- **Private repositories**: Need `repo` scope in your token to access private repos
- **Time filter too restrictive**: Try removing `-d` option or increasing the days

### üåê Network Issues

```bash
# Test GitHub API connectivity
curl -H "Authorization: token YOUR_TOKEN" https://api.github.com/user
```

### üí° Still having issues?

1. **Verify your GitHub username**: `https://github.com/YOUR_USERNAME`
2. **Test your token**: Try the curl command above
3. **Check token scopes**: Go to GitHub Settings > Tokens and verify permissions

### üìû Get Help

Open an issue at: https://github.com/yourusername/get-gh-reviews/issues

## Requirements

- Node.js 14.0.0 or higher
- GitHub Personal Access Token with appropriate scopes
- Network access to GitHub API (https://api.github.com)

## Rate Limiting

This tool respects GitHub's API rate limits:

- **5,000 requests/hour** for authenticated requests
- Built-in retry logic and rate limit handling
- For large organizations, consider running during off-peak hours

## üöÄ Roadmap & Future Features

- [ ] **üîî Review notifications** - Get notified when you receive new reviews
- [ ] **üìà Trend analysis** - Track review patterns over time with charts
- [ ] **üé® Custom themes** - Personalize your Markdown reports
- [ ] **ü§ñ AI insights** - Smart analysis of feedback patterns
- [ ] **üìß Email reports** - Automated weekly/monthly review summaries
- [ ] **üîÑ CI/CD integration** - Automate report generation in workflows

## ü§ù Contributing

We love contributions! Here's how you can help:

1. **üêõ Report bugs** - Found an issue? [Open a bug report](https://github.com/Kroro1208/gh-get-reviews/issues)
2. **üí° Feature requests** - Have an idea? [Suggest a feature](https://github.com/Kroro1208/gh-get-reviews/issues)
3. **üî® Code contributions**:
   - Fork the repository
   - Create a feature branch (`git checkout -b feature/amazing-feature`)
   - Commit your changes (`git commit -m 'Add amazing feature'`)
   - Push to the branch (`git push origin feature/amazing-feature`)
   - Open a Pull Request

### üôè Contributors

Special thanks to everyone who has contributed to making this tool better!

## üìù License

[ISC License](https://opensource.org/licenses/ISC) - see the [LICENSE](LICENSE) file for details.

## üìû Support & Community

- **üêõ Issues**: [GitHub Issues](https://github.com/Kroro1208/gh-get-reviews/issues)
- **üí¨ Discussions**: [GitHub Discussions](https://github.com/Kroro1208/gh-get-reviews/discussions)
- **üìß Email**: For enterprise support inquiries

## üåü Show Your Support

If this tool helped you track your reviews and improve your workflow:

- ‚≠ê **Star this repository**
- üê¶ **Share on Twitter/LinkedIn**
- üìù **Write a blog post** about your experience
- ü§ù **Contribute** code, documentation, or ideas

## üìã Changelog

### v1.7.5 (2025-01-15)

üîß **Progress Bar Stability Fix**

**Bug Fixes:**

- üìä **Fixed Progress Bar Position** - Progress bar no longer shifts horizontally due to variable dot lengths
- üéØ **Stable Loading Animation** - Loading text now uses fixed-width formatting for consistent display
- üìè **Aligned Progress Display** - Percentage values are now right-aligned for better readability

**Improvements:**

- ‚ú® **Smoother User Experience** - Progress bar stays in a consistent position during loading
- üé® **Better Visual Alignment** - All progress elements maintain proper spacing

### v1.7.4 (2025-01-15)

üåê **International Support Enhancement**

**New Features:**

- üåê **Bilingual Display** - All Japanese terms now show English equivalents (e.g., "APPROVED (ÊâøË™çÊ∏à„Åø)")
- üìù **Bilingual Section Headers** - All major sections display both English and Japanese
- üîó **Bilingual Links** - Link texts now include both language versions
- üìä **International Statistics** - Status displays are now globally accessible

**Improvements:**

- üåç **Global Accessibility** - Non-Japanese speakers can now understand all report sections
- üìã **Clear Status Labels** - Review states clearly show both English and Japanese terms
- üéØ **Professional International Reports** - Reports are now suitable for international teams

### v1.7.3 (2025-01-15)

üìä **Progress Tracking Enhancement**

**New Features:**

- üìä **Progress Bar** - Real-time visual progress bar showing review fetching progress
- üìà **Percentage Display** - Shows completion percentage alongside the progress bar
- üî¢ **Current/Total Counter** - Displays current item vs total items being processed
- üé® **Colored Progress Bar** - Beautiful cyan-colored progress visualization

**Improvements:**

- ‚ö° **Better User Feedback** - Users can see exactly how much work remains
- üìä **Visual Progress Tracking** - Progress bar updates in real-time as PRs are processed
- üéØ **Professional Loading Experience** - Combines ASCII art, tips, and progress tracking

### v1.7.2 (2025-01-15)

üé® **Enhanced Visual Experience**

**New Features:**

- üñ•Ô∏è **ASCII Art Loading Screen** - Beautiful GET-GH-REVIEWS ASCII art logo displayed during processing
- üí° **Helpful Tips Display** - Shows useful getting started tips while loading reviews
- üé® **Colorful Terminal Output** - Enhanced visual experience with colored text and clear formatting
- üì∫ **Clean Screen Management** - Auto-clears screen for better presentation

**Improvements:**

- üöÄ **Better User Experience** - Clear visual feedback with professional ASCII branding
- üìã **Informative Loading** - Users see helpful tips instead of just waiting
- üéØ **Professional Appearance** - Tool now has distinctive visual identity

### v1.7.1 (2025-01-15)

üîß **Bug Fixes & Quality Improvements**

**Bug Fixes:**

- üêõ **Fixed Duplicate Reviews** - Eliminated duplicate review entries in both table of contents and detail sections
- üìã **Improved Review Display** - Review comments now show actual content (first 30 characters) instead of generic "COMMENTED„É¨„Éì„É•„Éº" text
- üîç **Enhanced PR Grouping** - Reviews are now properly grouped by PR in the table of contents with unique identification
- üíª **Restored Code Diff Display** - Code diff viewing functionality was accidentally removed during simplification and has been restored

**Improvements:**

- üéØ **Better Content Preview** - Table of contents now shows meaningful review content snippets for easier navigation
- üìä **More Accurate Review Counts** - Duplicate removal ensures accurate review counts per PR
- üîó **Improved Navigation** - Enhanced anchor links between table of contents and detailed sections

### v1.7.0 (2025-01-15)

üéâ **Major Update - Enhanced User Experience!**

**New Features:**

- üê± **Cute Loading Animations** - Added adorable characters (meow, paws, magic, sparkle) during processing
- üìÖ **Timeline View** - GitHub-style chronological display mixing reviews, code comments, and replies
- üìã **Enhanced Table of Contents** - Separate sections for PRs and individual review comments with clickable navigation
- üåê **International Support** - Loading messages now use English-friendly cute characters

**Improvements:**

- ‚ö° **Better Progress Tracking** - Real-time display of which PR is being processed (e.g., "Processing 3/10: PR Title")
- üìä **Detailed Status Updates** - Step-by-step progress from repository discovery to completion
- üéØ **More Accurate Timeline** - Reviews and replies now display in exact chronological order like GitHub

**Bug Fixes:**

- üîß Fixed timeline ordering issues
- üõ†Ô∏è Improved error handling during data collection

### Previous Versions

- v1.6.2 - Security improvements and error handling
- v1.6.0 - Added support for private repositories
- v1.5.0 - Markdown report generation
- v1.4.0 - Statistics and filtering features

---

**Made with ‚ù§Ô∏è for the developer community**

_This tool addresses the missing GitHub feature of tracking reviews received - helping developers worldwide understand their code review patterns and build better relationships with their teams._
